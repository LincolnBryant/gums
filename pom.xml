<?xml version="1.0" encoding="UTF-8"?>
<project>
	<modelVersion>4.0.0</modelVersion>
	<groupId>gums</groupId>
	<artifactId>gums-client</artifactId>
	<name>gums-client</name>
	<version>1.3.0-RC3</version>
	<description>GUMS Client provides the administrative command line tools to administer GUMS.
    It allows querying and changing the state of the GUMS server.</description>
  
  	<repositories>
		<repository>
	    	<id>usatlas</id>
			<name>usatlas repository</name>
	 		<layout>default</layout>
 			<url>http://grid.racf.bnl.gov/mvn</url>		
		</repository>
		<repository>
	    	<id>central</id>
			<name>Maven Repository Switchboard</name>
	 		<layout>default</layout>
 			<url>http://repo1.maven.org/maven2</url>
		</repository>
	</repositories>
 
     <pluginRepositories>
		<pluginRepository>
          <id>codehaus snapshot repository</id>
			<url>http://snapshots.repository.codehaus.org/</url>
			<releases>
				<enabled>true</enabled>
			</releases>
		</pluginRepository>
		<pluginRepository>
    		<id>Mojo Snapshots</id>
    		<url>http://snapshots.repository.codehaus.org/</url>
    		<snapshots>
      			<enabled>true</enabled>
    		</snapshots>
    		<releases>
      			<enabled>false</enabled>
    		</releases>
  		</pluginRepository>
    </pluginRepositories>
 
  	<distributionManagement>
		<repository>
	      <id>usatlas</id>
	      <name>usatlas repository</name>
	      <url>scp://grid.racf.bnl.gov/var/www/html/mvn</url>
		</repository>
	</distributionManagement>
 
   	<scm>
	    <connection>scm:svn:https://svn.usatlas.bnl.gov/svn/privilege/gums-client</connection>
	    <developerConnection>scm:svn:https://svn.usatlas.bnl.gov/svn/privilege/gums-client</developerConnection>
    	<url>https://svn.usatlas.bnl.gov/svn/privilege/gums-client</url>
	</scm>
	
    <build>
		<plugins>
			<plugin>
				<artifactId>maven-antrun-plugin</artifactId>
				<executions>
					<execution>
						<id>1</id>
						<phase>generate-sources</phase>
						<configuration>
							<tasks>
								<mkdir dir="target/temp"/>
								<copy filtering="on" todir="target/temp">
									<fileset includes="*.jar" dir="${user.home}/.m2/repository/axis/axis-ant/1.4"/>
									<fileset includes="*.jar" dir="${user.home}/.m2/repository/axis/axis/1.4"/>
									<fileset includes="*.jar" dir="${user.home}/.m2/repository/axis/axis-saaj/1.4"/>
									<fileset includes="*.jar" dir="${user.home}/.m2/repository/axis/axis-jaxrpc/1.4"/>
									<fileset includes="*.jar" dir="${user.home}/.m2/repository/axis/axis-wsdl4j/1.5.1"/>
									<fileset includes="*.jar" dir="${user.home}/.m2/repository/commons-discovery/commons-discovery/0.2"/>
									<fileset includes="*.jar" dir="${user.home}/.m2/repository/commons-logging/commons-logging/1.0.4"/>
								</copy>
								<ant antfile="wsdl2java.xml" target="createClientStub" inheritRefs="true"/>
								<delete dir="target/temp"/>
							</tasks>
						</configuration>
						<goals>
							<goal>run</goal>
						</goals>
					</execution>
					<execution>
						<id>2</id>
						<phase>package</phase>
						<configuration>
							<tasks>
								<mkdir dir="target/lib"/>
								<copy filtering="on" todir="target/lib">
                  					<fileset includes="*.jar" dir="${user.home}/.m2/repository/axis/axis/1.4"/>
                  					<fileset includes="*.jar" dir="${user.home}/.m2/repository/axis/axis-jaxrpc/1.4"/>
                  					<fileset includes="*.jar" dir="${user.home}/.m2/repository/axis/axis-saaj/1.4"/>
                  					<fileset includes="*.jar" dir="${user.home}/.m2/repository/axis/axis-wsdl4j/1.5.1"/>
                  					<fileset includes="*.jar" dir="${user.home}/.m2/repository/gums/gums-core/${version}"/>
                  					<fileset includes="*.jar" dir="${user.home}/.m2/repository/commons-cli/commons-cli/2.0"/>
                  					<fileset includes="*.jar" dir="${user.home}/.m2/repository/commons-beanutils/commons-beanutils/1.7.0"/>
                  					<fileset includes="*.jar" dir="${user.home}/.m2/repository/commons-collections/commons-collections/3.2"/>
                  					<fileset includes="*.jar" dir="${user.home}/.m2/repository/commons-digester/commons-digester/1.8"/>
                  					<fileset includes="*.jar" dir="${user.home}/.m2/repository/commons-discovery/commons-discovery/0.2"/>
                  					<fileset includes="*.jar" dir="${user.home}/.m2/repository/commons-logging/commons-logging/1.0.4"/>
       								<fileset includes="*.jar" dir="${user.home}/.m2/repository/log4j/log4j/1.2.12"/>
							        <fileset includes="*.jar" dir="${user.home}/.m2/repository/glite/bcprov/jdk15-139"/>
							        <fileset includes="*.jar" dir="${user.home}/.m2/repository/glite/glite-security-util-java/1.0.0dev"/>
							        <fileset includes="*.jar" dir="${user.home}/.m2/repository/glite/glite-security-trustmanager/1.6.3dev"/>
							        <fileset includes="*.jar" dir="${user.home}/.m2/repository/opensciencegrid/privilege/1.0.1.3"/>
							        <fileset includes="*.jar" dir="${user.home}/.m2/repository/opensaml/opensaml/1.0.1"/>
							        <fileset includes="*.jar" dir="${user.home}/.m2/repository/xalan/xalan/2.6.0"/>
							        <fileset includes="*.jar" dir="${user.home}/.m2/repository/xml-security/xml-security/1.0.4"/>
							    </copy>
							    <mkdir dir="target/lib/endorsed"/>
								<copy filtering="on" todir="target/lib/endorsed">
							        <fileset includes="*.jar" dir="${user.home}/.m2/repository/xerces/dom3-xercesImpl/2.5.0"/>
							        <fileset includes="*.jar" dir="${user.home}/.m2/repository/xerces/dom3-xmlParserAPIs/2.5.0"/>
							        <fileset includes="*.jar" dir="${user.home}/.m2/repository/xalan/xalan/2.6.0"/>
							    </copy>
								<copy filtering="on" todir="target/lib">
									<fileset includes="*.jar" dir="target"/>
								</copy>
															    
							    <mkdir dir="target/scripts"/>
				                <copy todir="target/scripts"> 
				                	<fileset dir="src/main/scripts/"/>
				                </copy>
   				                <chmod file="target/scripts/gums" perm="ug+x"/>
				                <chmod file="target/scripts/gums-service" perm="ug+x"/>
				                <chmod file="target/scripts/gums-host" perm="ug+x"/>
				                <chmod file="target/scripts/gums-host-cron" perm="ug+x"/>
				                <chmod file="target/scripts/gums-nagios" perm="ug+x"/>
				                
				                <mkdir dir="target/config"/>
				                <copy todir="target/config">
				                	<fileset dir="src/main/config/"/>
				                </copy>

								<mkdir dir="target/log"/>
							</tasks>
						</configuration>
						<goals>
							<goal>run</goal>
						</goals>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-compiler-plugin</artifactId>
				<configuration>
					<excludes>
						<exclude>**/.svn</exclude>
					</excludes>
				</configuration>
			</plugin>
			<plugin>
		        <groupId>org.apache.maven.plugins</groupId>
		        <artifactId>maven-surefire-plugin</artifactId>
		        <configuration>
			      <excludes>
		            <exclude>**/.svn</exclude>
		          </excludes>
		        </configuration>
			</plugin>
			<plugin>
		        <artifactId>maven-assembly-plugin</artifactId>
		        <executions>
					<execution>
						<id>5</id>
						<phase>package</phase>
				        <configuration>
							<descriptor>assembly.xml</descriptor>
							<finalName>gums-client-${version}</finalName>
							<outputDirectory>target</outputDirectory>
				        </configuration>
				   		<goals>
							<goal>attached</goal>
						</goals>
					</execution>
				</executions>
			</plugin>
			<plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>rpm-maven-plugin</artifactId>
                <version>2.0-alpha-3-SNAPSHOT</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>rpm</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <release>1</release>
                    <copyright>GPL</copyright>
                    <distribution>myapp</distribution>
                    <group>Grid/Security</group>
                    <packager>John R. Hover</packager>
                    <prefix>/usr</prefix>

                    <mappings>
                        <mapping>
                            <directory>/usr/bin</directory>
                            <filemode>775</filemode>
                            <username>root</username>
                            <groupname>root</groupname>
                            <sources>
                                <source>
                                    <location>src/main/scripts</location>
                                </source>
                            </sources>
                        </mapping>
             
                        <mapping>
                            <directory>/etc/gums</directory>
                            <configuration>true</configuration>
                            <filemode>655</filemode>
                            <username>root</username>
                            <groupname>root</groupname>
                            <sources>
                                <source>
                                    <location>src/main/config</location>
                                </source>
                            </sources>
                        </mapping>

                        <mapping>
                            <directory>/usr/lib/gums</directory>
                            <filemode>755</filemode>
                            <username>root</username>
                            <groupname>root</groupname>
                            <artifact/>
                            <sources>
                                <source>
                                    <location>target/lib</location>
                                </source>
                            </sources>
                        </mapping>             
              
                        <mapping>
                            <directory>/log</directory>
                            <filemode>750</filemode>
                            <username>root</username>
                            <groupname>root</groupname>
                        </mapping>
                    </mappings>                    
                </configuration>
            </plugin>
		</plugins>
    </build>
	 
 	<dependencies> 
        <dependency>
            <groupId>gums</groupId>
            <artifactId>gums-core</artifactId>
            <version>${version}</version>
        </dependency>
		<dependency>
            <groupId>commons-beanutils</groupId>
            <artifactId>commons-beanutils</artifactId>
            <version>1.7.0</version>
        </dependency>
        <dependency>
            <groupId>opensciencegrid</groupId>
            <artifactId>privilege</artifactId>
            <version>1.0.1.3</version>
        </dependency>
        <dependency>
            <groupId>opensaml</groupId>
            <artifactId>opensaml</artifactId>
            <version>1.0.1</version>
        </dependency>
		<dependency>
			<groupId>xalan</groupId>
			<artifactId>xalan</artifactId>
			<version>2.7.0</version>
		</dependency> 
		<dependency>
			<groupId>xerces</groupId>
			<artifactId>dom3-xercesImpl</artifactId>
			<version>2.5.0</version>
		</dependency>   
		<dependency>
			<groupId>xerces</groupId>
			<artifactId>dom3-xmlParserAPIs</artifactId>
			<version>2.5.0</version>
		</dependency>  
		<dependency>
			<groupId>xml-security</groupId>
			<artifactId>xml-security</artifactId>
			<version>1.0.4</version>
		</dependency>		
 	</dependencies>  
</project>
