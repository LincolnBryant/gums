<?xml version="1.0" encoding="UTF-8"?>

<!-- Rename this file to gums.config and customize -->

<gums version='1.2'>
	<persistenceFactories>
		<hibernatePersistenceFactory
			name='mysql'
			hibernate.connection.driver_class='com.mysql.jdbc.Driver'
			hibernate.dialect='net.sf.hibernate.dialect.MySQLDialect'
			hibernate.connection.url='jdbc:mysql://localhost:3306/GUMS_1_1'
			hibernate.connection.username='gums'
			hibernate.connection.password=''
			hibernate.connection.autoReconnect='true'
			hibernate.c3p0.min_size='3'
			hibernate.c3p0.max_size='20'
			hibernate.c3p0.timeout='180'/>
	</persistenceFactories>
	
	<vomsServers>
	    <vomsServer
			name='griddevVoms'
			baseUrl='https://griddev01.usatlas.bnl.gov:8443/voms'
			persistenceFactory='mysql' 
			sslCertfile='/etc/grid-security/hostcert.pem'
			sslKey='/etc/grid-security/hostkey.pem'/>
	</vomsServers>

	<userGroups>
		<manualUserGroup
			name='admins'
			persistenceFactory='mysql'
			access='write'/>
		<vomsUserGroup
			name='vomsUserGroup'
			vomsServer='griddevVoms'
			remainderUrl='/griddev/services/VOMSAdmin'
			acceptProxyWithoutFQAN='true'
			matchFQAN='exact'
			voGroup='/griddev/subgriddev'
			role='griddevRole'/>	
	</userGroups>
	
	<accountMappers>
		<manualAccountMapper
			name='accountMapperA'
			persistenceFactory='mysql'/>
		<groupAccountMapper
			name='accountMapperB'
			accountName='myaccount'/>
		<accountPoolMapper
			name='accountMapperC'
			persistenceFactory='mysql'
			accountPool='myaccountpool'/>
	</accountMappers>
	
	<groupToAccountMappings>
		<groupToAccountMapping
			name='groupToAccountMappingA' 
			userGroups='admins' 
			accountMappers='accountMapperA'/>
		<groupToAccountMapping 
			name='groupToAccountMappingB' 
			userGroups='vomsUserGroup' 
			accountMappers='accountMapperB,accountMapperC'/>
	</groupToAccountMappings>
	  
	<hostToGroupMappings>
		<hostToGroupMapping 
			cn='*.site.com' 
			groupToAccountMappings='groupToAccountMappingA, groupToAccountMappingB'/>
	</hostToGroupMappings>
</gums>
